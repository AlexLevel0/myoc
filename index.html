<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ã‚ªãƒªã‚­ãƒ£ãƒ©ä¸€è¦§</title>
<style>
  :root{
    --bg:#f7f8fb;
    --card:#ffffff;
    --accent:#ff6b6b;
    --text:#222;
    --muted:#666;
    --gap:12px;
    --radius:12px;
  }
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:20px;
  }

  h1{
    margin:0 0 18px 0;
    font-size:20px;
  }

  /* ã‚°ãƒªãƒƒãƒ‰ */
  .grid{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap:var(--gap);
  }
  @media (min-width:640px){
    .grid{ grid-template-columns: repeat(3, 1fr); }
  }
  @media (min-width:1000px){
    .grid{ grid-template-columns: repeat(4, 1fr); }
  }

  /* ã‚«ãƒ¼ãƒ‰ï¼ˆã‚¿ãƒƒãƒã—ã‚„ã™ã„ã‚µã‚¤ã‚ºï¼‰ */
  .card{
    background:var(--card);
    border-radius:var(--radius);
    padding:12px;
    box-shadow: 0 6px 18px rgba(15,20,30,0.06);
    display:flex;
    gap:10px;
    align-items:center;
    cursor:pointer;
    transition:transform .12s ease, box-shadow .12s ease;
    touch-action:manipulation;
  }
  .card:active { transform:scale(.996); }
  .card:focus { outline: 3px solid rgba(255,107,107,.14); }

  .avatar{
    width:64px;
    height:64px;
    border-radius:10px;
    flex:0 0 64px;
    display:inline-grid;
    place-items:center;
    font-size:28px;
    background:linear-gradient(135deg,#fff,#f4f4f6);
    overflow:hidden;
  }
  .meta{
    flex:1;
    min-width:0;
  }
  .furigana{
    font-size:12px;
    color:var(--muted);
    line-height:1;
  }
  .name{
    font-weight:700;
    margin-top:4px;
    font-size:15px;
    white-space:nowrap;
    text-overflow:ellipsis;
    overflow:hidden;
  }

  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  .overlay{
    position:fixed;
    inset:0;
    display:none;
    background:rgba(10,12,16,0.45);
    align-items:center;
    justify-content:center;
    z-index:40;
    padding:20px;
  }
  .overlay.open{ display:flex; }

  .panel{
    width:100%;
    max-width:720px;
    background:var(--card);
    border-radius:14px;
    box-shadow:0 20px 40px rgba(10,12,16,0.25);
    padding:18px;
    display:grid;
    grid-template-columns: 110px 1fr;
    gap:14px;
    align-items:start;
  }
  @media (max-width:520px){
    .panel{ grid-template-columns: 84px 1fr; padding:14px; }
    .avatar{ width:84px; height:84px; border-radius:10px; font-size:36px; }
  }

  .panel .title{
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  .panel .title .bigname{ font-size:20px; font-weight:800; }
  .panel .title .small{ color:var(--muted); font-size:13px; }

  .closebtn{
    position:absolute;
    right:18px;
    top:18px;
    background:none;
    border:0;
    color:var(--muted);
    font-size:18px;
    cursor:pointer;
  }

  .profile{
    font-size:14px;
    color:var(--text);
    line-height:1.6;
  }

  .meta-row{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:8px;
  }
  .chip{
    background:#f2f6ff;
    padding:6px 8px;
    border-radius:999px;
    font-size:12px;
    color:#234;
  }

  /* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º */
  .card:focus-visible{
    box-shadow:0 6px 18px rgba(15,20,30,0.12);
    transform:translateY(-2px);
  }

  /* èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ */
  .hint{ color:var(--muted); font-size:13px; margin-bottom:8px; }

</style>
</head>
<body>
  <h1>ã‚ªãƒªã‚­ãƒ£ãƒ©ä¸€è¦§</h1>
  <p class="hint">ã‚¿ãƒƒãƒ—ï¼ã‚¯ãƒªãƒƒã‚¯ã§ã‚­ãƒ£ãƒ©æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚’ç·¨é›†ã—ã¦è‡ªåˆ†ã®ã‚­ãƒ£ãƒ©ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>

  <div id="grid" class="grid" role="list"></div>

  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="panel" role="document" aria-labelledby="cp-name">
      <button id="closeBtn" class="closebtn" aria-label="é–‰ã˜ã‚‹">âœ•</button>
      <div class="avatar" id="modalAvatar" aria-hidden="true">ğŸ¾</div>
      <div>
        <div class="title">
          <div id="cp-furigana" class="small">ãµã‚ŠãŒãª</div>
          <div id="cp-name" class="bigname">åå‰</div>
          <div id="cp-sub" class="small">ï¼ˆã‚µãƒ–æƒ…å ±ï¼‰</div>
        </div>

        <div class="meta-row" id="metaRow" style="margin-top:10px;"></div>

        <div class="profile" id="cp-desc" style="margin-top:10px;">
          ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚
        </div>
      </div>
    </div>
  </div>

<script>
/*
  ã‚­ãƒ£ãƒ©ãƒ‡ãƒ¼ã‚¿ã¯ã“ã“ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
  fields:
    icon: 1æ–‡å­—ã®çµµæ–‡å­—ã‚„ç”»åƒã®URLï¼ˆå¤–éƒ¨ç”»åƒä½¿ã„ãŸã„å ´åˆã¯ <img> ã‚’è¨­å®šã™ã‚‹ã‚ˆã†ã«JSã‚’èª¿æ•´ï¼‰
    furigana: ãµã‚ŠãŒãª
    name: è¡¨ç¤ºå
    sub: å¹´é½¢ã‚„ç¨®æ—ãªã©ã®çŸ­ã„ã‚µãƒ–æƒ…å ±
    tags: é…åˆ—ï¼ˆæ€§æ ¼ã‚„è·æ¥­ãªã©ï¼‰
    desc: é•·ã„èª¬æ˜ï¼ˆHTMLã‚‚å¯èƒ½ï¼‰
*/
const characters = [
  {
    icon: "ğŸŒ¸",
    furigana: "ã‚ˆã¤ã¯",
    name: "å››è‘‰ï¼ˆã‚ˆã¤ã¯ï¼‰",
    sub: "17æ­³ / å­¦ç”Ÿ",
    tags: ["å…ƒæ°—", "å¤©ç„¶", "èŠ±å¥½ã"],
    desc: "æ˜ã‚‹ãã¦ãŠèŠ±ãŒå¥½ããªå¥³ã®å­ã€‚å°ã•ãªã“ã¨ã§å¹¸ã›ã«ãªã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã€‚è¶£å‘³ã¯å…¬åœ’ã§ãŠæ•£æ­©ã¨æŠ˜ã‚Šç´™ã€‚"
  },
  {
    icon: "ğŸ¦Š",
    furigana: "ã“ã¾ã¡",
    name: "å°ç”ºï¼ˆã“ã¾ã¡ï¼‰",
    sub: "ä¸æ˜ / å¦–",
    tags: ["ã„ãŸãšã‚‰å¥½ã", "ç¥å‡ºé¬¼æ²¡"],
    desc: "è¬å¤šãç‹ã®å¦–ã€‚å¤œè¡Œæ€§ã§é™ã‹ãªå ´æ‰€ã«ã„ã‚‹ã“ã¨ãŒå¥½ãã€‚äººé–“ã«ã¯ã‚ã£ãŸã«å§¿ã‚’è¦‹ã›ãªã„ã€‚"
  },
  {
    icon: "ğŸ”¥",
    furigana: "ãŸã‘ã‚‹",
    name: "æ­¦ï¼ˆãŸã‘ã‚‹ï¼‰",
    sub: "28æ­³ / æˆ¦å£«",
    tags: ["ç†±è¡€", "ã¾ã£ã™ã"],
    desc: "ç†±ãã¦çœŸã£ç›´ããªæˆ¦å£«ã€‚ä»²é–“ã®ã“ã¨ã‚’ä½•ã‚ˆã‚Šå¤§äº‹ã«ã™ã‚‹ã€‚æ™®æ®µã¯ç„¡å£ã ãŒæ€’ã‚‹ã¨æ€–ã„ã€‚"
  },
  {
    icon: "ğŸ§¸",
    furigana: "ã‚‚ã‚‚",
    name: "æ¡ƒä¹ƒï¼ˆã‚‚ã‚‚ã®ï¼‰",
    sub: "8æ­³ / å­ä¾›",
    tags: ["ç„¡é‚ªæ°—", "ãŠè“å­å¥½ã"],
    desc: "ç”˜ã„ã‚‚ã®ã«ç›®ãŒãªã„å¯æ„›ã„å­ã€‚å¥½å¥‡å¿ƒæ—ºç››ã§ãƒˆãƒ©ãƒ–ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼ã€‚"
  },
  {
    icon: "ğŸª„",
    furigana: "ã‚Œã„",
    name: "é›¶ï¼ˆã‚Œã„ï¼‰",
    sub: "é­”è¡“å¸«",
    tags: ["ã‚¯ãƒ¼ãƒ«", "è¦³å¯Ÿè€…"],
    desc: "å†·é™æ²ˆç€ãªé­”è¡“å¸«ã€‚æ„Ÿæƒ…ã‚’è¡¨ã«å‡ºã•ãªã„ãŒä»²é–“æƒ³ã„ã€‚"
  },
  {
    icon: "ğŸ¾",
    furigana: "ã”ã£ã¡ã‚ƒã‚“",
    name: "ã”ã¾ã©ã†ãµï¼ˆã”ã£ã¡ã‚ƒã‚“ï¼‰",
    sub: "çŒ« / ãƒãƒ³ãƒã‚«ãƒ³",
    tags: ["å™›ã‚€", "çŸ­è¶³"],
    desc: "çŸ­è¶³ã§ã‚ˆãå™›ã‚€ä¸æ€è­°ãªçŒ«ã€‚é£¼ã„ä¸»ã‚’ã‚ˆãè¦³å¯Ÿã—ã¦ã„ã‚‹ã€‚"
  }
];

/* DOM ç”Ÿæˆ */
const grid = document.getElementById('grid');
characters.forEach((c, idx) => {
  const btn = document.createElement('button');
  btn.className = 'card';
  btn.type = 'button';
  btn.setAttribute('role','listitem');
  btn.setAttribute('aria-label', `${c.furigana} ${c.name} ã®è©³ç´°ã‚’è¦‹ã‚‹`);
  btn.dataset.index = idx;

  // ä¸­èº«
  const av = document.createElement('div');
  av.className = 'avatar';
  av.innerText = c.icon || 'ï¼Ÿ';

  const meta = document.createElement('div');
  meta.className = 'meta';
  const fr = document.createElement('div');
  fr.className = 'furigana';
  fr.innerText = c.furigana || '';
  const nm = document.createElement('div');
  nm.className = 'name';
  nm.innerText = c.name || '';

  meta.appendChild(fr);
  meta.appendChild(nm);

  btn.appendChild(av);
  btn.appendChild(meta);

  // ã‚¿ãƒƒãƒãƒ»ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
  btn.addEventListener('click', () => openModal(idx));
  btn.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(idx); }
  });

  grid.appendChild(btn);
});

/* ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œ */
const overlay = document.getElementById('overlay');
const modalAvatar = document.getElementById('modalAvatar');
const cpFurigana = document.getElementById('cp-furigana');
const cpName = document.getElementById('cp-name');
const cpSub = document.getElementById('cp-sub');
const cpDesc = document.getElementById('cp-desc');
const metaRow = document.getElementById('metaRow');
const closeBtn = document.getElementById('closeBtn');

let lastFocused = null;

function openModal(index){
  const c = characters[index];
  lastFocused = document.activeElement;
  modalAvatar.innerText = c.icon || 'ï¼Ÿ';
  cpFurigana.innerText = c.furigana || '';
  cpName.innerText = c.name || '';
  cpSub.innerText = c.sub || '';
  cpDesc.innerText = c.desc || '';

  // ãƒ¡ã‚¿ï¼ˆã‚¿ã‚°ï¼‰
  metaRow.innerHTML = '';
  if(Array.isArray(c.tags)){
    c.tags.forEach(t => {
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.innerText = t;
      metaRow.appendChild(chip);
    });
  }

  overlay.classList.add('open');
  overlay.setAttribute('aria-hidden','false');
  // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã¸
  closeBtn.focus();

  // ã‚¹ãƒ¯ã‚¤ãƒ—ã‚„ã‚¿ãƒƒãƒå‘ã‘ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ï¼ˆãŸã ã—ãƒ‘ãƒãƒ«å†…ã‚¯ãƒªãƒƒã‚¯ã¯é™¤å¤–ï¼‰
  // ï¼ˆæ—¢ã« handled by event listener belowï¼‰
}

function closeModal(){
  overlay.classList.remove('open');
  overlay.setAttribute('aria-hidden','true');
  if(lastFocused) lastFocused.focus();
}

/* ã‚¤ãƒ™ãƒ³ãƒˆ */
closeBtn.addEventListener('click', closeModal);
overlay.addEventListener('click', (ev) => {
  if(ev.target === overlay) closeModal(); // èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
});
// ESCã§é–‰ã˜ã‚‹
document.addEventListener('keydown', (e) => {
  if(e.key === 'Escape' && overlay.classList.contains('open')) closeModal();
});

/* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–‰ã˜ã‚‹ï¼ˆç°¡æ˜“ï¼‰ */
let startY = null;
overlay.addEventListener('touchstart', (e) => {
  if(e.touches.length === 1) startY = e.touches[0].clientY;
}, {passive:true});
overlay.addEventListener('touchmove', (e) => {
  if(startY === null) return;
  const diff = e.touches[0].clientY - startY;
  if(diff > 120) { // ä¸‹ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ãŸã‚‰é–‰ã˜ã‚‹
    closeModal();
    startY = null;
  }
}, {passive:true});
overlay.addEventListener('touchend', () => startY = null);

/* --- ã‚«ã‚¹ã‚¿ãƒ ã®ãƒ’ãƒ³ãƒˆ ---
  ãƒ»ã‚‚ã£ã¨å¤šãã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä¾‹: birthday, likes, voiceï¼‰ã‚’è¿½åŠ ã—ãŸã„å ´åˆã¯ characters é…åˆ—ã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¶³ã—ã¦
    openModal() ã®ä¸­ã§è¡¨ç¤ºè¦ç´ ã‚’ä½œã£ã¦ãã ã•ã„ã€‚
  ãƒ»icon ã«ç”»åƒURLã‚’ä½¿ã†å ´åˆã¯ avatar è¦ç´ å†…ã« <img src="..."> ã‚’å·®ã—è¾¼ã‚€å‡¦ç†ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚
  ãƒ»ã‚«ãƒ¼ãƒ‰ã«ä¸¦ã¹æ›¿ãˆï¼ãƒ•ã‚£ãƒ«ã‚¿ã‚’ã¤ã‘ã‚‹å ´åˆã¯ JS ã§ characters ã‚’æ“ä½œã—ã¦ grid ã‚’å†æç”»ã—ã¦ãã ã•ã„ã€‚
*/
</script>
</body>
</html>
